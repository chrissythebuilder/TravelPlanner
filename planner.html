<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title> Travel Planner </title>

    <link href="assets/css/reset.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Faster+One|PT+Sans:400,700" rel="stylesheet">

    <!-- Bootstrap Library -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link href="assets/css/style.css" rel="stylesheet">
    <!-- Firebase Library -->
    <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script>


</head>
<!-- Set up Landing Page -->

<body class="jumbotron">

    <!-- <header> BCKN Travel Planner </header> -->

    <!-- Set up Landing Page -->
    <div id="landing">
        <img src="assets/images/travelling3.jpg">
        <div id="details">
            <h1> BCKN Trip Planner </h1>
            <p> From Date </p>
            <input type="date" id="fromDate">
            <p> To Date </p>
            <input type="date" id="toDate">
            <p> Destination </p>
            <input type="text" id="destination" placeholder="City, Country">
            <br>
            <form action="planner.html">
                <button type="submit" class="btn btn-success" id="submit2">Time to plan!</button>
            </form>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Here are the top 5 recommendations based on your destination:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Set up Planner Page -->
    <div id="planning">
        <div id="title">
            <h2>Planner Page</h2>
            <p>We would like to officially welcome you to BCKN Trip Planner Builder's page. In here, you will have the opportunity
                to start building your customized list of points of interest for the selected date. Once done, confirm your
                list with the button below so you can see all the lists you have built as well as start planning activities
                for another date and/or destination.
                <br>
                <br>
                <span id="strong"> Remember: Make use of our added weather feature to assist you in choosing which activities you'd like to
                    participate in. </span>
            </p>
        </div>
        <div id="weather-display"></div>

        <div class="alert alert-danger" id="adv-disclaim">
            <p id="open-advanced">Click here if you already know the name of the place you are looking for!</p>
        </div>
        <div class="alert alert-success" id="gen-disclaim">
            <p id="open-general">Click here for a general search.</p>
        </div>
        <div class="form-group" id="general-search">
            <input type="text" class="form-control" id="general-input" placeholder="General search...">
            <button class="btn btn-primary" id="gen-item">Search</button>
        </div>
        <div class="form-group" id="advanced-search">
            <input type="text" class="form-control" id="advanced-input" placeholder="Advanced search...">
            <button class="btn btn-primary" id="adv-item">Search</button>
        </div>

        <div id="result-display"></div>

        <div class="row" id="images-display"></div>

        <div id="reviews-display"></div>

        <div id="list-display"></div>
        <br>
        <div class="form-group">
            <button class="btn btn-success" id="add-list">Add Item</button>
        </div>
        <div class="form-group">
            <button class="btn btn-success" id="confirm-list">Confirm List</button>
        </div>
    </div>

    <!-- Set up Itinerary Page -->
    <div class="banner"></div>

    <div id="itinerary">
        <div id="wrapper" class="row">
        </div>

        <div class="form-group">
            <button class="btn btn-success" id="next-day">Click here to move to the next day.</button>
        </div>
    </div>

    <!-- jQuery Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="assets/javascript/app.js"></script>

<script>

 
    // this file is created by Beth for user data firebase testing purpose.s
    
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyD3GtRS1N5UxrzvxA1i8XV0babAG61zf9Q",
      authDomain: "groupproject1-e81bf.firebaseapp.com",
      databaseURL: "https://groupproject1-e81bf.firebaseio.com",
      projectId: "groupproject1-e81bf",
      storageBucket: "groupproject1-e81bf.appspot.com",
      messagingSenderId: "825404731161"
  };

    firebase.initializeApp(config);

    var database = firebase.database();

// function writeUserData(userId, name, email, imageUrl) {
//   firebase.database().ref('users/' + userId).set({
//     username: name,
//     email: email,
//     profile_picture : imageUrl
//   });
// }


var userId = firebase.auth().currentUser.uid;
return firebase.database().ref('/users/' + userId).once('value').then(function(snapshot) {
  var username = (snapshot.val() && snapshot.val().username) || 'Anonymous';
  // ...
});



$("#adv-item").on("click", function(event) {
    alert('btn works')

        event.preventDefault();
        var generalSearch=$('#general-input').val().trim();  
        var advancedSearch=$('#advanced-input').val().trim();  

    // push user  input to firebase.
    database.ref('/users/' + userId).set({
        user:userId,
        genSearch:generalSearch,
        advSearch:advancedSearch
    });
      //clear form text boxes after push

  });

//   $("#gen-item").on("click", function(event) {

//     event.preventDefault();
//     var generalSearch=$('#general-input').val().trim();  
//     var advancedSearch=$('#advanced-input').val().trim();  

// // push user  input to firebase.
// database.ref().push({
//     user:userId,
//     genSearch:generalSearch,
//     advSearch:advancedSearch
// });
//   //clear form text boxes after push

// });



    database.ref('/users/' + userId).on("child_added", function(childSnapshot) {


      var tempuser=childSnapshot.val().user;
      var tempgenSearch=childSnapshot.val().genSearch;
      var tempadvSearch=childSnapshot.val().advSearch;
    //   var tempkey=childSnapshot.key;


      $('#list-display"').append("<ol>" +
      "<li>" + tempuser+ "</li>" +
      "<li>" + tempgenSearch+ "</li>" +
      "<li>" + tempadvSearch+ "</li>" +
      "<li>" +  tempkey+ "</li>" +
      "</ol>"
      );
      },function(errorObject) {
      console.log("Errors handled: " + errorObject.code);
      });





</script>



</body>



</html>